name: Webscraping

on:
  schedule:
    - cron: "13 * * * *" # Every hour
    
jobs:
  scrape:
    runs-on: ubuntu-latest
    
    # Load Repo and Install R
    steps:
      - uses: actions/checkout@master
      - uses: r-lib/actions/setup-r@v2 
      
      
       #Set-up R
      #- name: Install Packages
        #run: |
          #sudo apt install libcurl4-openssl-dev
          #R -e 'install.packages("dplyr")'
          #R -e 'install.packages("academictwitteR")'
          
      # Run Rscript    
      - name: Scraping
        run: Rscript R/hello.R
#on:
  #schedule:
    #- cron: '0 8 27-30,1-3 6-7 *'  # Executar todos os dias Ã  meia-noite UTC

      #- name: Install packages
        #run: |
          #Rscript -e 'install.packages("tidyverse")'
          #Rscript -e 'install.packages("forecast")'

      #- name: Run time series forecast
        #run: Rscript forecast_script.R

      #- name: Save forecast to CSV
        #run: |
          #mv forecast_results.csv ${{ github.workspace }}/forecast_results.csv

      - name: Send mail
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: smtp.gmail.com
          server_port: 587
          username: ${{ secrets.EMAIL }}
          password: ${{ secrets.SENHA }}
          from: joaopedrocf26@gmail.com
          to: joaopedrocf26@gmail.com
          subject: Time Series Forecast
          body: Please find attached the time series forecast for the next day.
          #attachments: ${{ github.workspace }}/forecast_results.csv

      # Add new files in folders and commit
      #- name: Commit
        #run: |
          #git config --local user.name github-actions
          #git config --local user.email "actions@github.com"
          #git add --all
          #git commit -am "add Data"
          #git push
        #env:
          #REPO_KEY: ${{secrets.GITHUB_TOKEN}}
          #username: github-actions
